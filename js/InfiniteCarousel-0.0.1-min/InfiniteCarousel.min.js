"use strict";function InfiniteCarousel(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q={},R=[],S=!1,T=null,U=!1,V=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}(),W=function(a,b){var c=$('<div style="display:none;"/>').appendTo($("body"));c.html("<!--[if "+(b||"")+" IE "+(a||"")+"]><a>&nbsp;</a><![endif]-->");var d=c.find("a").length;return c.remove(),d}(9,"lte");return u=function(a,c){c=c||1,$(a,b).animate({scale:c,left:0,top:0}),S=1!=c},v=function(a){var b,c=[].filter.call(a.attributes,function(a){return/^data-/.test(a.name)}),d={};for(b=0;b<c.length;b++)d[c[b].name]=c[b].value;return d},w=function(a){if(!(S||a.gesture&&a.gesture.touches.length>1)){var c=a.gesture.direction==Hammer.DIRECTION_RIGHT,d=a.gesture.direction==Hammer.DIRECTION_LEFT;switch(a.type){case"dragright":case"dragleft":case"swipeleft":case"swiperight":if(!(Math.abs(a.gesture.deltaX)>Math.abs(a.gesture.deltaY)))return;a.gesture.preventDefault()}switch(a.type){case"dragright":case"dragleft":if(U)T(t==s?{position:1,data:v(q[1])}:0==t?{position:s-2,data:v(q[s-2])}:{position:s-2,data:v(q[t])}),U=!1;else{var f=-(100*t),g=100*a.gesture.deltaX/q.width();e||(0==t&&c||t==s-1&&d)&&(g*=.4),E({percent:g+f,isAnimate:!1})}break;case"pinch":$(b).css({scale:a.gesture.scale}),a.gesture.stopDetect();break;case"swipeleft":I(),a.gesture.stopDetect();break;case"swiperight":J(),a.gesture.stopDetect();break;case"release":Math.abs(a.gesture.deltaX)>r/2?c?J():I():G(t,!0)}}},x=function(a){a=a||0,$(".carouselLoaderImage",b).css("height",n);var c=R[a];if(c){var d=new Image;d.onload=function(){var c=$(".carousel-li-pos-"+(a+1),b),e=$(".carousel-li-pos-"+(a+1)+"-hidden",b);c.html(d),e.length>0&&e.html(d.cloneNode()),x(a+1)},d.src=c}},y=function(){var a,c,d,e=$("> *",b),h='<div class="carouselLoaderImage"></div>',i="";for(f&&!g&&(i+='<div class="arrowOutside">'),i+="<ul>",c=0;c<e.length;c++){a=v(e[c]),i+="<li";for(d in a)i+=" "+d+'="'+a[d]+'"';i+=' class="carousel-li-pos-'+(c+1)+'"',i+=">",m&&$(e[c],b).is("img")?(R.push($(e[c],b).data("carousel-lazy-src")),i+=h):i+=$(e[c],b).prop("outerHTML"),i+="</li>"}return i+="</ul>",f&&!g&&(i+="</div>"),$(b).html(i),i},z=function(){var a,c,d;if(0===$(".posindicator",b).length){if(a="<div class='posindicator'>",q.length>1)for(d=0;d<q.length;d++)c=0===d?" active":"",a+='<span data-position="pos-'+(d+1)+'" class="p'+d+c+'"></span>';else a='<div class="clear5"></div>';return a+="</div>",$(b).append(a),$(b).css("position","relative"),p.css("margin-bottom",j?"0":"20px"),$(".posindicator span",b).css("background-color",k),$(".posindicator",b).css("text-align",l),$(".posindicator",b).css("bottom","0"),V||($(".posindicator span",b).css("width","15px"),$(".posindicator span",b).css("height","15px")),a}},A=function(){var a='<div class="carousel-prev-collection arrow-left"></div><div class="carousel-next-collection arrow-right"></div>';return $(b).append(a),$(".arrow-left",b).css("border-right-color",h),$(".arrow-right",b).css("border-left-color",h),a},B=function(){r=100/s,p.width(100*s+"%"),p.css("padding","auto "+d),q.each(function(){$(this).width(r+"%")}),$(q,b).css({display:"block"})},C=function(){var a=p.find("li:first").clone(),b=!1,c=p.find("li:last").clone(),d=!1;"hidden"!==a.attr("class").split("-")[a.attr("class").split("-").length-1]&&(b=!0,a.attr("class",a.attr("class")+"-hidden")),"hidden"!==c.attr("class").split("-")[c.attr("class").split("-").length-1]&&(d=!0,c.attr("class",c.attr("class")+"-hidden")),b&&(s++,p.prepend(c)),d&&(s++,p.append(a)),q=$(">li",p),G(1,!0)},D=function(a){b=a.element,c=a.noZoom,d=a.margin||0,e=a.hasLoop||!1,i=a.hasPosindicator||!1,j=a.posindicatorInside||!1,k=a.posindicatorColor||"#ffffff",l=a.posindicatorAlign||"center","left"!==l&&"center"!==l&&"right"!==l&&(l="center"),m=a.hasLazyLoading||!1,n=a.imageHeight||0,f=a.hasArrow||!1,g=a.arrowInside||!1,h=a.arrowColor||"#ffffff",y(),o=a.complete,p=$("ul",b),q=$(">li",p),r=0,s=q.length,t=0,e=1===s?!1:e?e:!1,o&&"function"==typeof o&&(T=o)},E=function(a){a.isAnimate&&!W?(U=e?!0:!1,p.stop().animate({"margin-left":a.percent+"%"},300,"linear",function(){U=!1,"function"==typeof a.complete&&a.complete()})):a.isAnimate||W?a.isAnimate?p.fadeOut(function(){p.css("margin-left",a.percent+"%"),p.fadeIn(),"function"==typeof a.complete&&a.complete()}):(p.css("margin-left",a.percent+"%"),"function"==typeof a.complete&&a.complete()):p.stop().animate({"margin-left":a.percent+"%"},0,"linear",function(){"function"==typeof a.complete&&a.complete()})},F=function(){$(b).hammer({drag:!0,hold:!1,release:!0,swipe:!0,tap:!1,touch:!0,drag_block_horizontal:!0,drag_lock_min_distance:1,transform:!1}).on("release dragleft dragright swipeleft swiperight",w),c||($(b).animate({left:0}),$(">li img",p).animate({left:0}),$(">li",p).hammer().on("pinch drag release doubletap touchmove","img",function(a){var b,c,d,e,f,g,h,i,j=a.gesture||{},k=j.scale*($(this).data("scale")||1),l=$(this).width(),m=$(this).height();k>1&&(a.preventDefault(),a.originalEvent&&a.originalEvent.preventDefault(),a.gesture&&a.gesture.preventDefault()),"touchmove"===a.type?a.originalEvent.touches.length>1&&a.preventDefault():"pinch"===a.type?(k>2&&(k=2),1>k?(k=1,S=!1,$(this).css({x:0,y:0})):S=!0,$(this).css({scale:k})):"doubletap"===a.type?$(this).css("scale")>1.4?u(this):u(this,2):"drag"===a.type?(k=+$(this).css("scale")||1,d=+$(this).data("x")||0,e=+$(this).data("y")||0,b=d+a.gesture.deltaX,f=k*l,h=(f-l)/2,c=e+a.gesture.deltaY/k,g=k*m,i=(g-m)/2,b>h?b=h:-b>h&&(b=-h),c*k>i?c=i/k:-c*k>i&&(c=-i/k),$(this).css({x:b,y:c})):"release"===a.type&&($(this).data("scale",$(this).css("scale")),$(this).data("x",parseInt($(this).css("x"))),$(this).data("y",parseInt($(this).css("y"))))})),f&&($(".carousel-prev-collection",b).on("click",function(a){a.stopPropagation(),a.preventDefault(),J()}),$(".carousel-next-collection",b).on("click",function(a){a.stopPropagation(),a.preventDefault(),I()})),i&&!V&&W&&$(".posindicator span",b).on("click",function(a){var b;a.stopPropagation(),a.preventDefault(),$(this).hasClass("active")||(b=$(this).data("position"),H(b.split("pos-")[1]))})},G=function(a,c,d){var f;return K(),c=null==c?!1:c,d=null==d?!0:d,a=Math.max(0,Math.min(a,s-1)),t=a,f=-(100*t),E({percent:f,isAnimate:d,complete:function(){if(e){var a=$(q[L()],b).attr("class");a.split("-hidden").length>1&&G(a.split("-hidden")[0].split("-")[a.split("-hidden")[0].split("-").length-1],!0,!1)}!c&&T&&"function"==typeof T&&T({position:L(),data:v(q[L()])})}}),$(".posindicator span",b).removeClass("active"),$("span.p"+(a+(e?-1:0)),b).addClass("active"),Q},H=function(a){G(e?a:a-1)},I=function(){return G(t+1)},J=function(){return G(t-1)},K=function(){var a=$(">li img",p);return a.css({x:0,y:0,scale:1}),a.data("x",0),a.data("y",0),a.data("scale",1),Q},L=function(){return t},M=function(){return s},N=function(){return e},O=function(){return B(),Q},P=function(a){return a&&D(a),$(b).hasClass("carousel")||$(b).addClass("carousel"),m&&x(),i&&z(),f&&A(),e&&C(),B(),F(),Q},Q.refreshCarousel=O,Q.next=I,Q.prev=J,Q.showPane=H,Q.resetZoom=K,Q.getCurrentPane=L,Q.getTotalPane=M,Q.getIsCircle=N,Q.setPaneDimensions=B,P(a)}